{% extends "base.html" %}

{% block seo_meta %}
<meta name="description" content="Upload videos directly to TikTok with AI-powered content creation. Connect your TikTok account and publish content with optimized captions and privacy settings.">
<meta name="keywords" content="TikTok upload, TikTok API, video upload, TikTok publishing, content posting, TikTok automation">
{% endblock %}

{% block title %}Upload Studio - TikTok | Creatrics{% endblock %}

{% block additional_styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/tiktok_upload_studio.css') }}">
{% endblock %}

{% block content %}
<div class="content-panel">
    <div class="generator-wrapper">
        <!-- Header -->
        <div class="generator-header">
            <h1 class="generator-title">
                <i class="ph ph-upload"></i>
                Upload Studio - TikTok
            </h1>
        </div>

        <!-- Content Area -->
        <div class="generator-content">
            <!-- Connection Status Card -->
            <div class="connection-card">
                <div class="connection-header">
                    <div class="connection-status">
                        <div class="status-indicator">
                            <div class="status-dot loading"></div>
                            <span class="status-text">Checking connection...</span>
                        </div>

                        <div id="connectionButtons" style="display: none;">
                            <button id="connectBtn" class="btn-connect" style="display: none;">
                                <i class="ph ph-tiktok-logo"></i>
                                Connect TikTok Account
                            </button>

                            <button id="disconnectBtn" class="btn-disconnect" style="display: none;">
                                <i class="ph ph-plug"></i>
                                Disconnect
                            </button>
                        </div>

                        <!-- Loading skeleton for buttons -->
                        <div id="buttonSkeleton" class="skeleton-loader" style="width: 150px; height: 36px; border-radius: 8px;"></div>
                    </div>

                    <!-- User Info (shown when connected) -->
                    <div id="userInfo" class="user-info" style="display:none;">
                        <img id="userAvatar" src="/static/img/default-avatar.png" alt="User Avatar" class="user-avatar">
                        <div class="user-details">
                            <div class="user-name" id="userName">TikTok User</div>
                            <div class="user-id" id="userOpenId">@username</div>
                        </div>
                    </div>
                </div>

                <!-- Info notice (hidden by default, shown when not connected after loading) -->
                <div id="infoNotice" class="info-notice" style="display: none;">
                    <i class="ph ph-info"></i>
                    <div>
                        <strong>Before connecting:</strong> You must be the TikTok account owner and authorized to post content. Videos will be uploaded according to your privacy settings.
                    </div>
                </div>
            </div>

            <!-- Side-by-Side Layout -->
            <div class="editor-grid">
                <!-- Left Panel - Input -->
                <div class="input-section">
                    <div class="input-panel">
                        <!-- Target Keyword -->
                        <div class="form-group">
                            <label class="form-label">
                                <i class="ph ph-key"></i>
                                Target Keywords
                            </label>
                            <input type="text"
                                   class="form-input"
                                   id="keywordsInput"
                                   placeholder="e.g., Gaming, FPS, Battlefield 2042">
                        </div>

                        <!-- Video Concept -->
                        <div class="form-group">
                            <label class="form-label">
                                <i class="ph ph-article"></i>
                                Video Concept or Script
                            </label>
                            <textarea class="form-textarea"
                                      id="videoConceptInput"
                                      placeholder="Describe your video content or paste your script..."
                                      maxlength="3000"
                                      oninput="updateCharCount()"></textarea>
                            <div class="char-count" id="charCount">0 / 3000</div>
                        </div>

                        <!-- Generate Button -->
                        <button class="btn-generate" onclick="generateTitles()" id="generateTitlesBtn" type="button">
                            <i class="ph ph-sparkle"></i>
                            Generate Titles & Hashtags
                        </button>
                    </div>
                </div>

                <!-- Right Panel - Results -->
                <div class="output-section">
                    <div class="results-panel">
                        <div id="resultsContainer">
                            <!-- Empty State -->
                            <div class="empty-results">
                                <i class="ph ph-sparkle empty-icon"></i>
                                <div class="empty-title">Ready to Create</div>
                                <div class="empty-text">Generate titles and hashtags, then upload your video to TikTok.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='scripts/tiktok_upload_studio.js') }}"></script>
{% endblock %}