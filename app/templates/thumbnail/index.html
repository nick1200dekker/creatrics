{% extends "base.html" %}
{% set check_auth = true %}

{% block title %}AI Thumbnail Generator - Create Eye-Catching YouTube Thumbnails | Creatrics{% endblock %}

{% block seo_meta %}
<meta name="description" content="Generate stunning YouTube thumbnails with AI. Create click-worthy designs that boost views and engagement. Professional thumbnail creation made simple with Creatrics AI technology.">
<meta name="keywords" content="AI thumbnail generator, YouTube thumbnail creator, thumbnail design tool, viral thumbnails, content creation AI">
{% endblock %}

{% block additional_styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/thumbnail.css') }}">
{% endblock %}

{% block content %}
<div class="thumbnail-wrapper">
    <!-- Header -->
    <div class="thumbnail-header">
        <h1 class="thumbnail-title">
            <i class="ph ph-image"></i>
            AI Thumbnail Editor
        </h1>
    </div>

    <!-- Content -->
    <div class="thumbnail-content">
        <div class="editor-grid">
            <!-- Left Panel - Input -->
            <div class="input-section">
                <!-- Upload Images -->
                <div class="form-group">
                    <label class="form-label">Upload Image(s)</label>
                    <div class="upload-grid">
                        <div class="upload-slot" onclick="triggerUpload(0)">
                            <span class="upload-number">1</span>
                            <input type="file" id="file0" accept="image/*" onchange="handleUpload(0, this)" style="display: none;">
                            <div class="upload-placeholder">
                                <i class="ph ph-upload upload-icon"></i>
                                <div class="upload-text">Click to upload</div>
                            </div>
                        </div>
                        <div class="upload-slot" onclick="triggerUpload(1)">
                            <span class="upload-number">2</span>
                            <input type="file" id="file1" accept="image/*" onchange="handleUpload(1, this)" style="display: none;">
                            <div class="upload-placeholder">
                                <i class="ph ph-upload upload-icon"></i>
                                <div class="upload-text">Click to upload</div>
                            </div>
                        </div>
                        <div class="upload-slot" onclick="triggerUpload(2)">
                            <span class="upload-number">3</span>
                            <input type="file" id="file2" accept="image/*" onchange="handleUpload(2, this)" style="display: none;">
                            <div class="upload-placeholder">
                                <i class="ph ph-upload upload-icon"></i>
                                <div class="upload-text">Click to upload</div>
                            </div>
                        </div>
                        <div class="upload-slot" onclick="triggerUpload(3)">
                            <span class="upload-number">4</span>
                            <input type="file" id="file3" accept="image/*" onchange="handleUpload(3, this)" style="display: none;">
                            <div class="upload-placeholder">
                                <i class="ph ph-upload upload-icon"></i>
                                <div class="upload-text">Click to upload</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Model Selection -->
                <div class="form-group">
                    <div class="generation-options">
                        <div class="model-selection-wrapper">
                            <label class="form-label">Select Model</label>
                            <div class="model-cards">
                                <div class="model-card selected" data-model="nano-banana" onclick="selectModel('nano-banana')">
                                    <div class="model-name">Canvas Editor</div>
                                    <div class="model-credits">
                                        <i class="ph ph-coin"></i>
                                        <span id="nano-cost">5</span> credits
                                    </div>
                                </div>
                                <div class="model-card" data-model="seeddream" onclick="selectModel('seeddream')">
                                    <div class="model-name">Photo Editor</div>
                                    <div class="model-credits">
                                        <i class="ph ph-coin"></i>
                                        <span id="seed-cost">4</span> credits
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="num-images-wrapper">
                            <label class="form-label">Generations</label>
                            <div class="num-selector">
                                <button class="num-btn" onclick="decreaseNumImages()" id="decreaseBtn">
                                    <i class="ph ph-minus"></i>
                                </button>
                                <span class="num-display" id="numImagesDisplay">1</span>
                                <button class="num-btn" onclick="increaseNumImages()" id="increaseBtn">
                                    <i class="ph ph-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Prompt -->
                <div class="form-group">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                        <label class="form-label" style="margin-bottom: 0;">Prompt</label>
                        <button class="improve-prompt-btn" onclick="improvePrompt()" id="improveBtn" title="Enhance your prompt with AI">
                            <i class="ph ph-magic-wand"></i>
                            Improve Prompt
                            <span id="improveCost" style="margin-left: 0.3rem; opacity: 0.8;">
                                <i class="ph ph-coin" style="font-size: 0.75rem;"></i>
                                0.2
                            </span>
                        </button>
                    </div>
                    <textarea
                        id="promptInput"
                        class="prompt-textarea"
                        placeholder="Examples: Replace face with person from image 2, change background to beach, add text 'AMAZING', remove object"
                        maxlength="1000"
                        onkeyup="updateCharCount()"
                    ></textarea>
                    <div class="char-count" id="charCount">0 / 1000</div>
                </div>

                <!-- Generate Button -->
                <button class="generate-btn" id="generateBtn" onclick="generateThumbnail()">
                    <i class="ph ph-magic-wand"></i>
                    Generate
                </button>
            </div>

            <!-- Right Panel - Output -->
            <div class="output-section">
                <div class="form-group">
                    <label class="form-label">Result</label>
                    <div class="result-container" id="resultContainer">
                        <div class="result-placeholder">
                            <i class="ph ph-image-square"></i>
                            <p>Your generated thumbnail will appear here</p>
                        </div>
                    </div>
                </div>

                <!-- Preset Prompts Section -->
                <div class="preset-prompts-section">
                    <div class="preset-header" onclick="togglePresets()" style="cursor: pointer; user-select: none;">
                        <i class="ph ph-sparkle"></i>
                        <span>Quick Presets</span>
                        <i class="ph ph-caret-right" id="presetToggleIcon" style="transition: transform 0.2s; margin-left: 0.25rem;"></i>
                    </div>
                    <!-- Canvas Editor Presets -->
                    <div class="preset-grid" id="canvasPresets" style="display: none;">
                        {% for preset in canvas_presets %}
                        {% if preset.get('category') %}
                        <div class="preset-category">{{ preset.title }}</div>
                        {% else %}
                        <div class="preset-card" onclick="applyPreset('{{ preset.prompt | e }}')" title="{{ preset.prompt }}">
                            <div class="preset-icon">{{ preset.icon }}</div>
                            <div class="preset-title">{{ preset.title }}</div>
                        </div>
                        {% endif %}
                        {% endfor %}
                    </div>
                    <!-- Photo Editor Presets -->
                    <div class="preset-grid" id="photoPresets" style="display: none;">
                        {% for preset in photo_presets %}
                        <div class="preset-card" onclick="applyPreset('{{ preset.prompt | e }}')" title="{{ preset.prompt }}">
                            <div class="preset-icon">{{ preset.icon }}</div>
                            <div class="preset-title">{{ preset.title }}</div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- History Section -->
<div class="history-section">
    <div class="history-header">
        <h2 class="section-title">
            <i class="ph ph-clock-counter-clockwise"></i>
            Recent Generations
        </h2>
    </div>
    <div class="history-content">
        <div id="historyContainer">
            <!-- History will be loaded here -->
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='scripts/thumbnail.js') }}"></script>
{% endblock %}
