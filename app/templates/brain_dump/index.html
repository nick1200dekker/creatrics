{% extends "base.html" %}

{% block title %}AI Brain Dump - Capture & Organize Creative Ideas | Creatrics{% endblock %}

{% block seo_meta %}
<meta name="description" content="Capture and organize your creative ideas with AI-powered brain dump tool. Store content ideas, brainstorm concepts, and never lose inspiration with Creatrics intelligent note-taking system.">
<meta name="keywords" content="AI brain dump, creative ideas organizer, content brainstorming, idea management, creative notes, content planning">
{% endblock %}

{% block additional_styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/brain_dump.css') }}">
{% endblock %}

{% block content %}
<div class="content-panel">
    <div class="brain-dump-wrapper">
    <!-- Left Sidebar -->
    <aside class="notes-sidebar">
        <div class="sidebar-header">
            <h2 class="sidebar-title">
                <i class="ph ph-brain"></i>
                Brain Dump
            </h2>
            <button class="new-note-btn" onclick="createNewNote()">
                <i class="ph ph-plus"></i>
                New Note
            </button>
        </div>

        <div class="search-box">
            <div class="search-wrapper">
                <input type="text" 
                       class="search-input" 
                       id="searchInput" 
                       placeholder="Search notes...">
                <i class="ph ph-magnifying-glass search-icon"></i>
            </div>
        </div>
        
        <div class="notes-list" id="notesList">
            <div class="loading">
                <div class="spinner"></div>
            </div>
        </div>
    </aside>
    
    <!-- Right Side - Empty State (hidden by default) -->
    <main class="empty-state-full" id="emptyStateContainer" style="display: none;">
        <i class="ph ph-brain empty-state-icon"></i>
        <h2 class="empty-state-title">Welcome to Brain Dump</h2>
        <p class="empty-state-text">Create or select a note to start capturing your thoughts and ideas</p>
        <button class="action-btn" id="emptyStateButton" onclick="createNewNote()">
            <i class="ph ph-plus"></i>
            <span id="emptyStateButtonText">Create Your First Note</span>
        </button>
    </main>

    <!-- Right Editor Area (shown by default) -->
    <main class="editor-area" id="editorArea" style="display: flex;">
        <!-- Editor -->
        <div id="noteEditor" style="height: 100%; display: flex; flex-direction: column;">
            <div class="editor-header">
                <div class="editor-title-wrapper">
                    <input type="text" 
                           class="editor-title-input" 
                           id="noteTitle" 
                           placeholder="Untitled Note"
                           autocomplete="off">
                    <div class="title-actions">
                        <button class="icon-btn" id="favoriteBtn" onclick="toggleFavorite()" title="Favorite">
                            <i class="ph ph-star"></i>
                        </button>
                        <button class="icon-btn" id="shareBtn" onclick="toggleShare()" title="Share Note">
                            <i class="ph ph-share-network"></i>
                        </button>
                    </div>
                </div>
                <!-- Tags Section -->
                <div class="tags-section">
                    <div class="tags-container" id="tagsContainer">
                        <!-- Preset tags -->
                        <button class="tag-preset" data-tag="video-idea" onclick="toggleTag('video-idea')">
                            üé• Video Idea
                        </button>
                        <button class="tag-preset" data-tag="content-idea" onclick="toggleTag('content-idea')">
                            üí° Content Idea
                        </button>
                        <button class="tag-preset" data-tag="draft" onclick="toggleTag('draft')">
                            üìù Draft
                        </button>
                        <button class="tag-preset" data-tag="important" onclick="toggleTag('important')">
                            ‚≠ê Important
                        </button>
                        <button class="tag-preset" data-tag="research" onclick="toggleTag('research')">
                            üîç Research
                        </button>
                        <button class="tag-preset" data-tag="script" onclick="toggleTag('script')">
                            üìú Script
                        </button>
                        <button class="tag-preset" data-tag="social-media" onclick="toggleTag('social-media')">
                            üì± Social Media
                        </button>
                        <button class="tag-preset" data-tag="tutorial" onclick="toggleTag('tutorial')">
                            üìö Tutorial
                        </button>
                        <!-- Add custom tag button -->
                        <button class="tag-add" onclick="addCustomTag()">
                            <i class="ph ph-plus"></i> Add Tag
                        </button>
                    </div>
                </div>
            </div>

            <div class="editor-toolbar">
                <div class="toolbar-group">
                    <button class="toolbar-btn" onclick="formatText('bold')" title="Bold (Ctrl+B)">
                        <i class="ph ph-text-b"></i>
                    </button>
                    <button class="toolbar-btn" onclick="formatText('italic')" title="Italic (Ctrl+I)">
                        <i class="ph ph-text-italic"></i>
                    </button>
                    <button class="toolbar-btn" onclick="formatText('underline')" title="Underline (Ctrl+U)">
                        <i class="ph ph-text-underline"></i>
                    </button>
                </div>
                
                <div class="toolbar-separator"></div>
                
                <div class="toolbar-group">
                    <button class="toolbar-btn" onclick="formatText('formatBlock', 'h1')" title="Heading 1">
                        H1
                    </button>
                    <button class="toolbar-btn" onclick="formatText('formatBlock', 'h2')" title="Heading 2">
                        H2
                    </button>
                    <button class="toolbar-btn" onclick="formatText('formatBlock', 'h3')" title="Heading 3">
                        H3
                    </button>
                    <button class="toolbar-btn" onclick="formatText('formatBlock', 'p')" title="Paragraph">
                        P
                    </button>
                </div>
                
                <div class="toolbar-separator"></div>
                
                <div class="toolbar-group">
                    <button class="toolbar-btn" onclick="formatText('insertUnorderedList')" title="Bullet List">
                        <i class="ph ph-list-bullets"></i>
                    </button>
                    <button class="toolbar-btn" onclick="formatText('insertOrderedList')" title="Numbered List">
                        <i class="ph ph-list-numbers"></i>
                    </button>
                </div>
                
                <div class="toolbar-separator"></div>
                
                <div class="toolbar-group">
                    <button class="toolbar-btn" onclick="formatText('formatBlock', 'blockquote')" title="Quote">
                        <i class="ph ph-quotes"></i>
                    </button>
                    <button class="toolbar-btn" onclick="insertCode()" title="Code">
                        <i class="ph ph-code"></i>
                    </button>
                    <button class="toolbar-btn" onclick="insertLink()" title="Link">
                        <i class="ph ph-link"></i>
                    </button>
                </div>
                
                <div class="toolbar-separator"></div>
                
                <div class="toolbar-group">
                    <div class="color-picker-wrapper">
                        <input type="color" id="colorPicker" onchange="changeTextColor(this.value)">
                        <button class="toolbar-btn" onclick="document.getElementById('colorPicker').click()" title="Text Color">
                            <i class="ph ph-palette"></i>
                        </button>
                    </div>
                    <button class="toolbar-btn" onclick="formatText('removeFormat')" title="Clear Formatting">
                        <i class="ph ph-eraser"></i>
                    </button>
                </div>
            </div>
            
            <div class="editor-content">
                <div id="editor" contenteditable="true"></div>
            </div>
            
            <div class="editor-footer">
                <div class="save-status saved" id="saveStatus">
                    <i class="ph ph-check-circle"></i>
                    <span>Saved</span>
                </div>
                <!-- Delete button moved to note cards -->
            </div>
        </div>
    </main>
    </div>
</div>

<!-- Share Modal -->
<div class="share-modal" id="shareModal">
    <div class="share-modal-content">
        <div class="share-modal-header">
            <h3 class="share-modal-title">
                <i class="ph ph-share-network"></i>
                Share Note
            </h3>
        </div>

        <div class="share-permission-container" id="sharePermissionContainer">
            <div class="share-permission-label">Share Permission</div>
            <div class="permission-options">
                <label class="permission-option">
                    <input type="radio" name="sharePermission" value="view" checked>
                    <span class="permission-option-content">
                        <i class="ph ph-eye"></i>
                        <div>
                            <div class="permission-title">View Only</div>
                            <div class="permission-desc">Others can only read the note</div>
                        </div>
                    </span>
                </label>
                <label class="permission-option">
                    <input type="radio" name="sharePermission" value="edit">
                    <span class="permission-option-content">
                        <i class="ph ph-pencil"></i>
                        <div>
                            <div class="permission-title">Can Edit</div>
                            <div class="permission-desc">Others can edit and update the note</div>
                        </div>
                    </span>
                </label>
            </div>
        </div>

        <div class="share-link-container" id="shareLinkContainer" style="display: none;">
            <div class="share-link-label">Share Link</div>
            <div class="share-link-input-group">
                <input type="text" class="share-link-input" id="shareLinkInput" readonly>
                <button class="copy-link-btn" id="copyLinkBtn" onclick="copyShareLink()">
                    Copy
                </button>
            </div>
        </div>

        <div class="share-info">
            <p id="shareStatus">Choose permission level and click "Create Share Link".</p>
            <p style="margin-top: 0.5rem; font-size: 0.7rem;">Links expire after 30 days</p>
        </div>

        <div class="share-modal-actions">
            <button class="share-modal-btn cancel" onclick="closeShareModal()">Cancel</button>
            <button class="share-modal-btn unshare" id="unshareBtn" onclick="unshareNote()" style="display: none;">Remove Share Link</button>
            <button class="share-modal-btn" id="createShareBtn" onclick="createShareLink()" style="background: #3B82F6; color: white; border: none;">Create Share Link</button>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='scripts/brain_dump.js') }}"></script>
{% endblock %}
