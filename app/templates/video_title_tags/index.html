{% extends "base.html" %}

{% block seo_meta %}
<meta name="description" content="Generate viral YouTube video titles, descriptions, and optimized tags with AI. Create click-worthy titles and SEO-friendly content that boost views and discoverability.">
<meta name="keywords" content="AI video title generator, YouTube title creator, viral video titles, video tags optimizer, YouTube tags, SEO video optimization, video description generator">
{% endblock %}

{% block title %}Upload Studio | Creatrics{% endblock %}

{% block additional_styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/video_title_tags.css') }}">
{% endblock %}

{% block content %}
<div class="content-panel">
    <div class="generator-wrapper">
        <!-- Header -->
        <div class="generator-header">
            <h1 class="generator-title">
                <i class="ph ph-sparkle"></i>
                Upload Studio
            </h1>
        </div>

        <!-- Content Area -->
        <div class="generator-content">
            <div class="editor-grid">
                <!-- Left Panel - Input -->
                <div class="input-section">
                    <div class="input-panel">
                        <!-- Video Upload Section -->
                        <div class="form-group" id="videoUploadSection">
                            <label class="form-label">
                                <i class="ph ph-upload"></i>
                                Upload Video
                                <div class="info-tooltip">
                                    <i class="ph ph-info"></i>
                                    <span class="tooltip-text">Upload your video file to YouTube with AI-generated title, description, and tags</span>
                                </div>
                            </label>
                            <div class="video-upload-area" id="videoUploadArea" onclick="triggerVideoUpload()">
                                <input type="file" id="videoFileInput" accept="video/*" style="display: none;" onchange="handleVideoSelect(event)">
                                <div class="upload-content" id="uploadContent">
                                    <i class="ph ph-cloud-arrow-up" style="font-size: 2rem; color: var(--text-tertiary); margin-bottom: 0.25rem;"></i>
                                    <div style="color: var(--text-primary); font-weight: 500; margin-bottom: 0.125rem; font-size: 0.9375rem;">Click to upload video</div>
                                    <div style="color: var(--text-tertiary); font-size: 0.8125rem;">MP4, MOV, AVI (max 256GB)</div>
                                </div>
                                <div class="upload-progress" id="uploadProgress" style="display: none;">
                                    <div class="upload-file-info">
                                        <i class="ph ph-video" style="font-size: 2rem; color: var(--primary);"></i>
                                        <div style="flex: 1;">
                                            <div id="uploadFileName" style="color: var(--text-primary); font-weight: 500;"></div>
                                            <div id="uploadFileSize" style="color: var(--text-tertiary); font-size: 0.875rem;"></div>

                                            <!-- Progress bar -->
                                            <div id="videoUploadProgressContainer" style="display: none; margin-top: 0.75rem;">
                                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.25rem;">
                                                    <span style="font-size: 0.8125rem; color: var(--text-secondary);" id="videoUploadStatus">Uploading...</span>
                                                    <span style="font-size: 0.8125rem; color: var(--text-secondary); font-weight: 600;" id="videoUploadPercent">0%</span>
                                                </div>
                                                <div style="width: 100%; height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; border: 1px solid var(--border-primary);">
                                                    <div id="videoUploadProgressBar" style="height: 100%; width: 0%; background: linear-gradient(90deg, #3B82F6 0%, #8B5CF6 100%); transition: width 0.3s ease; box-shadow: 0 0 8px rgba(59, 130, 246, 0.5);"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="remove-video-btn" onclick="removeVideo(event)" title="Remove video" id="removeVideoBtn">
                                        <i class="ph ph-x"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Video Type Selection -->
                        <div class="form-group">
                            <label class="form-label">
                                <i class="ph ph-video"></i>
                                Video Type
                            </label>
                            <div class="video-type-toggle">
                                <button class="type-btn active" onclick="setVideoType('long')" id="longFormBtn">
                                    <i class="ph ph-film-script"></i>
                                    Long Form
                                </button>
                                <button class="type-btn" onclick="setVideoType('short')" id="shortFormBtn">
                                    <i class="ph ph-device-mobile"></i>
                                    Shorts
                                </button>
                            </div>
                        </div>

                        <!-- Keyword Input (Optional) -->
                        <div class="form-group">
                            <label class="form-label">
                                <i class="ph ph-key"></i>
                                Target Keyword
                                <div class="info-tooltip">
                                    <i class="ph ph-info"></i>
                                    <span class="tooltip-text">If provided, titles and descriptions will start with this exact keyword</span>
                                </div>
                            </label>
                            <input type="text"
                                   class="input-textarea"
                                   id="keywordInput"
                                   placeholder="e.g., Battlefield 6"
                                   style="min-height: 45px; padding: 0.75rem;">
                        </div>

                        <!-- Video Concept Input -->
                        <div class="form-group">
                            <label class="form-label">
                                <i class="ph ph-article"></i>
                                Video Concept/ Script
                            </label>
                            <textarea class="input-textarea"
                                      id="videoInput"
                                      placeholder="Describe your video content, paste your script, or outline your main points..."
                                      maxlength="5000"
                                      oninput="updateCharCount()"></textarea>
                            <div class="char-count" id="charCount">0 / 5000</div>
                        </div>

                        <!-- Generation Options -->
                        <div class="form-group">
                            <label class="form-label">
                                <i class="ph ph-check-square"></i>
                                What to Generate
                            </label>
                            <div class="generation-grid">
                                <div class="generation-card active" onclick="toggleGenerationCard(this, 'titles')" id="titlesCard">
                                    <i class="ph ph-text-aa"></i>
                                    <span>Titles</span>
                                </div>
                                <div class="generation-card" onclick="toggleGenerationCard(this, 'description')" id="descriptionCard">
                                    <i class="ph ph-article"></i>
                                    <span>Description</span>
                                </div>
                                <div class="generation-card" onclick="toggleGenerationCard(this, 'tags')" id="tagsCard">
                                    <i class="ph ph-hash"></i>
                                    <span>Tags</span>
                                </div>
                            </div>
                        </div>

                        <!-- Channel Keywords Section (Only shown when Tags is selected) -->
                        <div class="form-group" id="channelKeywordsSection" style="display: none;">
                            <div class="reference-section">
                                <div class="reference-header">
                                    <label class="form-label" style="margin-bottom: 0;">
                                        <i class="ph ph-tag"></i>
                                        Channel Keywords
                                        <div class="info-tooltip" style="display: inline-block;">
                                            <i class="ph ph-info"></i>
                                            <span class="tooltip-text">Your channel's keywords. 3-5 relevant keywords will be included in the generated tags for branding consistency.</span>
                                        </div>
                                    </label>
                                    <button class="reference-toggle-btn" onclick="toggleChannelKeywordsSection()" id="channelKeywordsToggle">
                                        <i class="ph ph-caret-down"></i>
                                    </button>
                                </div>
                                <div class="reference-content" id="channelKeywordsContent">
                                    <textarea class="reference-textarea"
                                              id="channelKeywords"
                                              placeholder="Enter your channel keywords separated by commas (e.g., your name, tiktok, instagram, content creation, social media growth)&#10;&#10;These will be loaded automatically from your YouTube channel when you connect it in Optimize Video."
                                              maxlength="2000"
                                              oninput="updateChannelKeywordsCharCount()"></textarea>
                                    <div class="reference-footer">
                                        <div class="char-count" id="channelKeywordsCharCount">0 / 2000</div>
                                        <div class="reference-actions">
                                            <button class="reference-action-btn clear-btn" onclick="clearChannelKeywords()" title="Clear keywords">
                                                <i class="ph ph-x"></i> Clear
                                            </button>
                                            <button class="reference-action-btn save-btn" onclick="saveChannelKeywords()" title="Save keywords" id="saveKeywordsBtn">
                                                <i class="ph ph-floppy-disk"></i> Save
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Reference Description Section (Only shown when Description is selected) -->
                        <div class="form-group" id="referenceDescriptionSection" style="display: none;">
                            <div class="reference-section">
                                <div class="reference-header">
                                    <label class="form-label" style="margin-bottom: 0;">
                                        <i class="ph ph-lightbulb"></i>
                                        <span id="refDescLabel">Reference Description (Long Form)</span>
                                        <div class="info-tooltip" style="display: inline-block;">
                                            <i class="ph ph-info"></i>
                                            <span class="tooltip-text">Paste an existing description to use as a style template. The AI will match the tone, structure, and formatting of your reference. Separate templates for long form and shorts.</span>
                                        </div>
                                    </label>
                                    <button class="reference-toggle-btn" onclick="toggleReferenceSection()" id="referenceToggle">
                                        <i class="ph ph-caret-down"></i>
                                    </button>
                                </div>
                                <div class="reference-content" id="referenceContent">
                                    <textarea class="reference-textarea"
                                              id="referenceDescriptionLong"
                                              placeholder="Paste an existing long form description you want to use as a template or reference..."
                                              maxlength="5000"
                                              oninput="updateRefDescCharCount()"
                                              style="display: block;"></textarea>
                                    <textarea class="reference-textarea"
                                              id="referenceDescriptionShort"
                                              placeholder="Paste an existing shorts description you want to use as a template or reference..."
                                              maxlength="5000"
                                              oninput="updateRefDescCharCount()"
                                              style="display: none;"></textarea>
                                    <div class="reference-footer">
                                        <div class="char-count" id="refDescCharCount">0 / 5000</div>
                                        <div class="reference-actions">
                                            <button class="reference-action-btn clear-btn" onclick="clearReferenceDescription()" title="Clear reference">
                                                <i class="ph ph-x"></i> Clear
                                            </button>
                                            <button class="reference-action-btn save-btn" onclick="saveReferenceDescription()" title="Save reference" id="saveRefDescBtn">
                                                <i class="ph ph-floppy-disk"></i> Save
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Generate Button -->
                        <button class="generate-btn" onclick="generateContent()" id="generateBtn">
                            <i class="ph ph-sparkle"></i>
                            Generate
                        </button>
                    </div>
                </div>

                <!-- Right Panel - Results -->
                <div class="output-section">
                    <div class="results-panel">
                        <div id="resultsContainer">
                            <!-- Empty State -->
                            <div class="empty-results">
                                <i class="ph ph-sparkle empty-icon"></i>
                                <div class="empty-title">Ready to Create</div>
                                <div class="empty-text">Your AI-generated content will appear here. Select what you want to generate and click the button.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='scripts/video_title_tags.js') }}"></script>
{% endblock %}